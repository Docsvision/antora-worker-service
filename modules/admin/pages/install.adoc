// tag::linux[]
:of: сервиса
:wt: workerservice
:config: Configuration

= Установка и настройка Службы {ws}

include::install-linux::partial$limitation.adoc[]

Пользователь, выполняющий установку Службы {ws}, должен обладать правами локального администратора.

// tag::sm-incompat[]
Служба {ws} данной версии несовместима с модулем {sm}.
// end::sm-incompat[]

WARNING: Перед установкой ознакомьтесь с разделом "xref:6.1@workerservice:ROOT:requirements.adoc[]".

include::6.1platform:admin:partial$install.adoc[]
+
Основные настройки, которые нужно сделать:
+
[source,json]
----
{
  "SettingsServiceConnectionString": "ConnectAddress=http://settings.domain.com:5200/api", <.>
  "ApiKey": "anything", <.>
  "RestApiAddress": "http://worker.domain.com:5900/api", <.>
  "LogFile": "/var/log/docsvision/WorkerService.log" <.>
}
----
<.> Адрес подключения к Сервису настроек.
<.> Ключ доступа к Сервису настроек -- "пароль", который также должен быть указан в конфигурационном файле сервиса.
<.> Адрес подключения к Службе {ws}.
<.> Путь к файлу журнала Службы {ws}
+
. Запустите службу модуля:
+
[source,bash]
----
sudo systemctl start dvworkerservice
----
// end::linux[]

[#windows]
== Установка Службы {ws} на Windows

Пользователь, выполняющий установку Службы {ws}, должен обладать правами локального администратора.

// WARNING: При первичной установке модуль должен устанавливаться сразу после модуля _{pl}_ и перед модулями _{ad}_ и _{bo}_. В противном случае необходимые расширения Службы {ws} не буду загружены в БД.

. Запустите пакет установки `{dv} WorkerService.msi`.
+
.Мастер установки Службы {ws}
image::install-hello.png[Мастер установки Службы {ws}]
+
. Примите условия лицензионного соглашения, чтобы продолжить установку, и нажмите кнопку *Далее*.
+
.Условия лицензионного соглашения
image::install-license.png[Условия лицензионного соглашения]
+
. Выберите компоненты, которые требуется установить.
+
.Выбор устанавливаемых компонентов Службы {ws}
image::install-components.png[Выбор устанавливаемых компонентов Службы {ws}]
+
****
Служба {ws}::
Устанавливает основные файлы Службы {ws}.

Серверные компоненты::
Когда компонент выбран, устанавливается библиотека карточек. Перед завершением установки будет запущена _{cns}_ для обновления БД.
+
[WARNING]
====
include::ROOT:partial$excerpts.adoc[tags=the-component-lin]
====

Кнопки::
* *Сброс* -- сбрасывает выбор компонентов на стандартные
* *Использование диска* -- позволяет посмотреть свободное место на системных дисках.
****
+
//tag::confirm[]
. Нажмите кнопку *Установить*, чтобы начать установку или кнопку *Назад*, чтобы вернуться на предыдущий шаг.
//end::confirm[]
+
.Продолжить установку или вернуться на предыдущий шаг
image::install-check.png[Продолжить установку или вернуться на предыдущий шаг]
+
// . Не устанавливайте флаг `*Обновить базу данных (WorkerService)*`.
// +
//tag::finish[]
. Нажмите кнопку *Готово*, чтобы закрыть мастер установки.
//end::finish[]
+
include::install-linux:ROOT:partial$restart-and-db.adoc[]
+
. Запустите {wincl}. При подключении к серверу {dv} с установленной серверной частью модуля, клиентская часть модуля будет установлена автоматически.

[#client]
== Установка клиентской части модуля из установочного пакета

.Чтобы установить клиентскую часть модуля вручную:
. Запустите пакет установки `{dv} Worker service client.msi` вручную.
+
Для установки клиентской части модуля используются область и каталог установки, указанные в конфигурационном файле модуля {pl}, см. документацию модуля {pl} xref:6.1@platform:console:config-client.adoc[].
// (указана в приветственном окне мастера установки)  установки, которые были использованы при установке модуля {pl}.
+
. Примите условия лицензионного соглашения, чтобы продолжить установку.
. Нажмите на кнопку *Установить* и дождитесь завершения установки модуля.
. Нажмите на кнопку *Готово*, чтобы закрыть мастер установки.

[#uninstall]
== Удаление модуля

. Чтобы удалить модуль в ОС Linux, выполните команду:
+
include::6.1platform:admin:partial$delete.adoc[]
+
Компоненты модуля следует удалять до удаления компонентов модуля _{pl}_.
+
. В ОС Windows компоненты модуля удаляются стандартными средствами.
